<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="robots" content="noindex, nofollow" class="jsx-1179018057"/><link href="https://fonts.googleapis.com/css?family=Lora:ital,wght@0,400;0,700;1,400;1,700|Poppins:400,500,600,700&amp;display=swap" rel="stylesheet" class="jsx-1179018057"/><title>Spina Advanced: Overriding - Nicolas Thiry</title><meta name="description" content="Going further with Spina and trying to override it&#x27;s default behavior to fits our needs."/><meta name="next-head-count" content="6"/><link rel="preload" href="/nicolasthy.next.js/_next/static/l2K0ZmxrNYE0oVJv2Dg_A/pages/_app.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/l2K0ZmxrNYE0oVJv2Dg_A/pages/posts/%5Bslug%5D.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/chunks/c71b4a2c02507129a7399b785c6fae89815e077e.9448a719dfcc1617186b.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/chunks/1443e5d844994c7425ef1feb95c9ae983d5c9a24.d26e3f5073f8d2ec78c3.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/runtime/main-7e6ae5fe2e85357fb1d2.js" as="script"/><style id="__jsx-1179018057">body{background:#F7F7FF;color:#191716;-webkit-transition:background 0.2s linear,color 0.2s linear;transition:background 0.2s linear,color 0.2s linear;}pre{-webkit-transition:background 0.2s linear;transition:background 0.2s linear;}code{font-family:"Operator Mono","Menlo",monospace;}code>span{padding:5px 25px;display:block;}a{color:#424140;-webkit-transition:color 0.1s linear;transition:color 0.1s linear;}h1,h2,h3,h4,h5{font-family:"Poppins",sans-serif;}.medium-zoom-overlay{z-index:10;background:#9B5DE5 !important;}.medium-zoom-image.medium-zoom-image--opened{z-index:15;}.page-transition-enter:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}.page-transition-enter-active:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}.page-transition-exit:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}.page-transition-exit-active:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}</style></head><body><div id="__next"><div style="visibility:hidden"><style data-emotion-css="1hfkiwo">.css-1hfkiwo{width:100%;max-width:650px;margin-left:auto;margin-right:auto;font-family:"Lora",serif;}</style><div class="css-1hfkiwo"><style data-emotion-css="qr9n8g">.css-qr9n8g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-qr9n8g a{-webkit-text-decoration:none;text-decoration:none;}</style><header class="css-qr9n8g"><a href="/nicolasthy.next.js/"><style data-emotion-css="jfzec1">.css-jfzec1{background:#9B5DE5;color:#F7F7FF;box-shadow:0 16px 12px -10px rgba(5,7,26,0.1);margin:15px 0;width:60px;height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:15px;line-height:32px;font-family:"Lora",serif;font-size:32px;font-weight:bold;font-style:italic;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><span class="css-jfzec1">nt</span></a><style data-emotion-css="bls3z0">.css-bls3z0{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><ul class="css-bls3z0"><style data-emotion-css="1fjob1m">.css-1fjob1m{margin:0 10px;border-radius:50px;padding:4px 15px;font-family:"Poppins",sans-serif;background:rgba(155,93,229,0.1);color:#9B5DE5;}</style><li class="css-1fjob1m">Stories</li><style data-emotion-css="1ow6gmw">.css-1ow6gmw{margin:0 10px;border-radius:50px;padding:4px 15px;font-family:"Poppins",sans-serif;}</style><li class="css-1ow6gmw">About me</li></ul><style data-emotion-css="yhekxj">.css-yhekxj{margin:0 0 0 auto;cursor:pointer;}</style><div class="css-yhekxj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#5C415D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></div></header><div class=""><style data-emotion-css="1x567gc">.css-1x567gc{font-size:52px;font-weight:700;}</style><h1 class="css-1x567gc">Spina Advanced: Overriding</h1><style data-emotion-css="18agfnm">.css-18agfnm{font-size:18px;line-height:2.125;}.css-18agfnm p{color:#191716;}.css-18agfnm .alert{border-radius:14px;padding:15px 30px;line-height:1.4;margin:0 25px;}.css-18agfnm .alert.alert-warning{background:#f4e7be;color:#8e3d1a;}</style><div class="css-18agfnm"><div><div class="alert alert-warning">
Spina has been updated a lot since I've written these articles. Commands may have changed since and I will do my best to write new articles on Spina soon !
</div></div><p>Hi, previously we saw <a href="{{site.baseurl}}/spina-rails-cms/">how to install and set up our own theme on Spina</a>. However it just didn&#x27;t feel like I had a full control of my content and felt the need to override the default behavior of the CMS.</p><p>Spina allows you to implement plugins just like on Wordpress, unfortunately I&#x27;m no Ruby expert and didn&#x27;t really understand how I could achieve to create my own plugin. It is however something I am looking forward to do and am currently working on it.</p><p>So here we are, I&#x27;d like to modify some behaviors on Spina but I don&#x27;t want to develop a plugin for it. Actually a plugin would probably not be appropriate for this kind of change. I&#x27;d like to set a default <style data-emotion-css="o9sqdn">.css-o9sqdn{padding:3px 8px;background-color:rgba(25,23,22,0.05);color:rgba(155,93,229,0.8);border-radius:6px;cursor:pointer;}</style><code class="css-o9sqdn">&lt;title&gt;</code> when I don&#x27;t specify it in the <code class="css-o9sqdn">SEO &lt;title&gt;</code> field which would be “{Page title} - {Site name}”. If you have already used Spina you should know that by default it takes the Page Title as the <code class="css-o9sqdn">SEO &lt;title&gt;</code> when you leave it blank. Why would I need to change this? I could simply go to my layout and append the Site name ! Sure... But what if I don&#x27;t need the Site Name for a given page? How do I manage to do this? And I would have to set a condition to not to show the Page Title on the homepage since it would only be the Site Name.</p><p>This might not look like the most interesting override to apply to Spina, however it&#x27;s easy enough to help you understand how it works. You can do whatever you want after this. So let&#x27;s get started !</p><h2>Unlinking the Title and the SEO Title</h2><p>By default when setting a title to your page, it creates a <code class="css-o9sqdn">SEO &lt;title&gt;</code> but this is no longer what we want it to do.</p><p>To do that we will have to recreate the <code class="css-o9sqdn">Page</code> model and update the part we want to change. Let&#x27;s look at <a href="https://github.com/denkGroot/Spina/blob/master/app/models/spina/page.rb">Spina&#x27;s source code for this</a>.</p><p>Simply create a new file <code class="css-o9sqdn">app/models/spina/page.rb</code> and copy paste the code from Spina.
Then let&#x27;s change the part we need which is the following:</p><style data-emotion-css="cssveg">.css-cssveg{position:relative;}</style><div class="css-cssveg"><div><style data-emotion-css="v8jbtu">.css-v8jbtu{position:absolute;top:0;left:-10%;margin:10px 0 0 25px;font-family:"Poppins",sans-serif;font-size:12px;opacity:0.3;cursor:pointer;-webkit-transition:opacity 0.2s linear;transition:opacity 0.2s linear;}.css-v8jbtu > span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-v8jbtu svg{width:16px;margin-right:10px;}.css-v8jbtu:hover{opacity:0.6;}</style><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><style data-emotion-css="p8oanf">.css-p8oanf{position:absolute;top:0;right:-10%;margin:10px 10px 0 0;padding:3px 10px;border-radius:50px;min-width:45px;font-family:"Poppins",sans-serif;font-size:12px;opacity:1;color:#fff;text-align:center;background:rgba(255,49,91,1);}</style><span class="css-p8oanf">Ruby</span></div><style data-emotion-css="1o93l7h">.css-1o93l7h{background:#FAFAFF !important;box-shadow:0 16px 12px -10px rgba(5,7,26,0.1);}</style><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span class="hljs-function" style="color:#a71d5d">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#795da3">seo_title</span><span>
</span></span><span><span>  read_attribute(</span><span style="color:#0086b3">:seo_title</span><span>).blank? ? title : read_attribute(</span><span style="color:#0086b3">:seo_title</span><span>)
</span></span><span><span></span><span style="color:#a71d5d">end</span></span></code></pre></div><p>That we will be replacing by:</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Ruby</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span class="hljs-function" style="color:#a71d5d">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#795da3">seo_title</span><span>
</span></span><span style="background-color:rgba(255, 49, 91, 0.1);border-left:3px solid rgba(255, 49, 91, 1)"><span>  read_attribute(</span><span style="color:#0086b3">:seo_title</span><span>)
</span></span><span><span></span><span style="color:#a71d5d">end</span></span></code></pre></div><p>Now if you set your <code class="css-o9sqdn">SEO &lt;title&gt;</code> to blank it won&#x27;t insert the title of the page instead.</p><h2>Displaying our custom page title</h2><p>This is the easy part, we just have to set our title in our default layout:</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Ruby</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span>title = @page.seo_title.present? ? @page.seo_title : </span><span style="color:#df5000">&quot;</span><span class="hljs-subst" style="color:#df5000">#{@page.title}</span><span style="color:#df5000"> - </span><span class="hljs-subst" style="color:#df5000">#{current_account.name}</span><span style="color:#df5000">&quot;</span></span></code></pre></div><p>That&#x27;s it ! The <code class="css-o9sqdn">current_account.name</code> references the Website name that you may set in your admin panel. Pretty easy don&#x27;t you think?</p><p>You can apply this to any behavior in Spina by simply recreating the desired file at the same location as in Spina&#x27;s source code and change the line you want.</p></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\n\u003cdiv class=\"alert alert-warning\"\u003e\nSpina has been updated a lot since I've written these articles. Commands may have changed since and I will do my best to write new articles on Spina soon !\n\u003c/div\u003e\n\nHi, previously we saw [how to install and set up our own theme on Spina]({{site.baseurl}}/spina-rails-cms/). However it just didn't feel like I had a full control of my content and felt the need to override the default behavior of the CMS.\n\nSpina allows you to implement plugins just like on Wordpress, unfortunately I'm no Ruby expert and didn't really understand how I could achieve to create my own plugin. It is however something I am looking forward to do and am currently working on it.\n\nSo here we are, I'd like to modify some behaviors on Spina but I don't want to develop a plugin for it. Actually a plugin would probably not be appropriate for this kind of change. I'd like to set a default `\u003ctitle\u003e` when I don't specify it in the `SEO \u003ctitle\u003e` field which would be “{Page title} - {Site name}”. If you have already used Spina you should know that by default it takes the Page Title as the `SEO \u003ctitle\u003e` when you leave it blank. Why would I need to change this? I could simply go to my layout and append the Site name ! Sure... But what if I don't need the Site Name for a given page? How do I manage to do this? And I would have to set a condition to not to show the Page Title on the homepage since it would only be the Site Name.\n\nThis might not look like the most interesting override to apply to Spina, however it's easy enough to help you understand how it works. You can do whatever you want after this. So let's get started !\n\n## Unlinking the Title and the SEO Title\n\nBy default when setting a title to your page, it creates a `SEO \u003ctitle\u003e` but this is no longer what we want it to do.\n\nTo do that we will have to recreate the `Page` model and update the part we want to change. Let's look at [Spina's source code for this](https://github.com/denkGroot/Spina/blob/master/app/models/spina/page.rb).\n\nSimply create a new file `app/models/spina/page.rb` and copy paste the code from Spina.\nThen let's change the part we need which is the following:\n\n```Ruby\ndef seo_title\n  read_attribute(:seo_title).blank? ? title : read_attribute(:seo_title)\nend\n```\n\nThat we will be replacing by:\n\n```Ruby{2}\ndef seo_title\n  read_attribute(:seo_title)\nend\n```\n\nNow if you set your `SEO \u003ctitle\u003e` to blank it won't insert the title of the page instead.\n\n## Displaying our custom page title\n\nThis is the easy part, we just have to set our title in our default layout:\n```Ruby\ntitle = @page.seo_title.present? ? @page.seo_title : \"#{@page.title} - #{current_account.name}\"\n```\n\nThat's it ! The `current_account.name` references the Website name that you may set in your admin panel. Pretty easy don't you think?\n\n\nYou can apply this to any behavior in Spina by simply recreating the desired file at the same location as in Spina's source code and change the line you want.","data":{"title":"Spina Advanced: Overriding","author":"Nicolas Thiry","tags":["ruby"],"excerpt":"Going further with Spina and trying to override it's default behavior to fits our needs.","published":true},"isEmpty":false,"excerpt":"Going further with Spina and trying to override it's default behavior to fits our needs."}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2016-03-23-spina-advanced-overriding"},"buildId":"l2K0ZmxrNYE0oVJv2Dg_A","assetPrefix":"/nicolasthy.next.js","nextExport":false,"isFallback":false,"gsp":true,"appGip":true}</script><script nomodule="" src="/nicolasthy.next.js/_next/static/runtime/polyfills-1c161e633660818aa2c3.js"></script><script async="" data-next-page="/_app" src="/nicolasthy.next.js/_next/static/l2K0ZmxrNYE0oVJv2Dg_A/pages/_app.js"></script><script async="" data-next-page="/posts/[slug]" src="/nicolasthy.next.js/_next/static/l2K0ZmxrNYE0oVJv2Dg_A/pages/posts/%5Bslug%5D.js"></script><script src="/nicolasthy.next.js/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/nicolasthy.next.js/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" async=""></script><script src="/nicolasthy.next.js/_next/static/chunks/c71b4a2c02507129a7399b785c6fae89815e077e.9448a719dfcc1617186b.js" async=""></script><script src="/nicolasthy.next.js/_next/static/chunks/1443e5d844994c7425ef1feb95c9ae983d5c9a24.d26e3f5073f8d2ec78c3.js" async=""></script><script src="/nicolasthy.next.js/_next/static/runtime/main-7e6ae5fe2e85357fb1d2.js" async=""></script><script src="/nicolasthy.next.js/_next/static/l2K0ZmxrNYE0oVJv2Dg_A/_buildManifest.js" async=""></script><script src="/nicolasthy.next.js/_next/static/l2K0ZmxrNYE0oVJv2Dg_A/_ssgManifest.js" async=""></script></body></html>