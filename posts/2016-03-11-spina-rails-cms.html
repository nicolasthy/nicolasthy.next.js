<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="robots" content="noindex, nofollow" class="jsx-1179018057"/><link href="https://fonts.googleapis.com/css?family=Lora:ital,wght@0,400;0,700;1,400;1,700|Poppins:400,500,600,700&amp;display=swap" rel="stylesheet" class="jsx-1179018057"/><title>Spina: A Ruby on Rails CMS - Nicolas Thiry</title><meta name="description" content="Introduction to a new CMS built on Ruby on Rails. This is a step by step guide to get started with it."/><meta name="next-head-count" content="6"/><link rel="preload" href="/nicolasthy.next.js/_next/static/c2gPfX42HipDbcEI7eATE/pages/_app.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/c2gPfX42HipDbcEI7eATE/pages/posts/%5Bslug%5D.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/chunks/5d581ca7a6b7feed04ab21d48a887f6897e243dd.9448a719dfcc1617186b.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/chunks/498e1ba5385146d16e862764b4705d04b633e4b8.d26e3f5073f8d2ec78c3.js" as="script"/><link rel="preload" href="/nicolasthy.next.js/_next/static/runtime/main-7e6ae5fe2e85357fb1d2.js" as="script"/><style id="__jsx-1179018057">body{background:#F7F7FF;color:#191716;-webkit-transition:background 0.2s linear,color 0.2s linear;transition:background 0.2s linear,color 0.2s linear;}pre{-webkit-transition:background 0.2s linear;transition:background 0.2s linear;}code{font-family:"Operator Mono","Menlo",monospace;}code>span{padding:5px 25px;display:block;}a{color:#424140;-webkit-transition:color 0.1s linear;transition:color 0.1s linear;}h1,h2,h3,h4,h5{font-family:"Poppins",sans-serif;}.medium-zoom-overlay{z-index:10;background:#9B5DE5 !important;}.medium-zoom-image.medium-zoom-image--opened{z-index:15;}.page-transition-enter:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}.page-transition-enter-active:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}.page-transition-exit:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}.page-transition-exit-active:after{content:"";background:#9B5DE5;position:fixed;top:0;right:0;left:0;bottom:0;z-index:10;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform 0.6s cubic-bezier(1,0,0,1);-webkit-transition:transform 0.6s cubic-bezier(1,0,0,1);transition:transform 0.6s cubic-bezier(1,0,0,1);}</style></head><body><div id="__next"><div style="visibility:hidden"><style data-emotion-css="1hfkiwo">.css-1hfkiwo{width:100%;max-width:650px;margin-left:auto;margin-right:auto;font-family:"Lora",serif;}</style><div class="css-1hfkiwo"><style data-emotion-css="qr9n8g">.css-qr9n8g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-qr9n8g a{-webkit-text-decoration:none;text-decoration:none;}</style><header class="css-qr9n8g"><a href="/nicolasthy.next.js/"><style data-emotion-css="jfzec1">.css-jfzec1{background:#9B5DE5;color:#F7F7FF;box-shadow:0 16px 12px -10px rgba(5,7,26,0.1);margin:15px 0;width:60px;height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:15px;line-height:32px;font-family:"Lora",serif;font-size:32px;font-weight:bold;font-style:italic;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><span class="css-jfzec1">nt</span></a><style data-emotion-css="bls3z0">.css-bls3z0{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><ul class="css-bls3z0"><style data-emotion-css="1fjob1m">.css-1fjob1m{margin:0 10px;border-radius:50px;padding:4px 15px;font-family:"Poppins",sans-serif;background:rgba(155,93,229,0.1);color:#9B5DE5;}</style><li class="css-1fjob1m">Stories</li><style data-emotion-css="1ow6gmw">.css-1ow6gmw{margin:0 10px;border-radius:50px;padding:4px 15px;font-family:"Poppins",sans-serif;}</style><li class="css-1ow6gmw">About me</li></ul><style data-emotion-css="yhekxj">.css-yhekxj{margin:0 0 0 auto;cursor:pointer;}</style><div class="css-yhekxj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#5C415D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></div></header><div class=""><style data-emotion-css="1x567gc">.css-1x567gc{font-size:52px;font-weight:700;}</style><h1 class="css-1x567gc">Spina: A Ruby on Rails CMS</h1><style data-emotion-css="18agfnm">.css-18agfnm{font-size:18px;line-height:2.125;}.css-18agfnm p{color:#191716;}.css-18agfnm .alert{border-radius:14px;padding:15px 30px;line-height:1.4;margin:0 25px;}.css-18agfnm .alert.alert-warning{background:#f4e7be;color:#8e3d1a;}</style><div class="css-18agfnm"><div><div class="alert alert-warning">
Spina has been updated a lot since I've written these articles. Commands may have changed since and I will do my best to write new articles on Spina soon !
</div></div><p>Hi, lately I have been working on a different project that no longer requires React — neither Javascript actually. It&#x27;s a CMS built on Ruby on Rails, a kind of equivalent to Wordpress, called <a href="http://www.spinacms.com/">Spina</a>. It&#x27;s new, it&#x27;s open-source, it&#x27;s ruby on rails and it&#x27;s awesome !</p><p>The down-side of this project is that they don&#x27;t really have any documentation yet. That&#x27;s why I&#x27;ve decided to start writing about it and even contributed to their Wiki. As I am a front-end developer, I won&#x27;t be able to talk about all the back-end ruby part. It&#x27;s going to be mainly some front-end tips and instructions to get started with Spina. You won&#x27;t find a lot of articles or tutorials about this, but the developers at Spina are very reactive and even opened a Slack channel to communicate with it&#x27;s users !</p><p>So let&#x27;s get started !</p><h2>Installing Spina</h2><p>Installing Spina is really easy, you only need 3 simple lines given in their <a href="https://github.com/denkGroot/Spina">Github repo</a>.
As it&#x27;s a Ruby on Rails CMS, you obviously need to have a Rails app first.</p><p>If you do have Ruby on Rails working, simply create a new project.</p><style data-emotion-css="cssveg">.css-cssveg{position:relative;}</style><div class="css-cssveg"><div><style data-emotion-css="v8jbtu">.css-v8jbtu{position:absolute;top:0;left:-10%;margin:10px 0 0 25px;font-family:"Poppins",sans-serif;font-size:12px;opacity:0.3;cursor:pointer;-webkit-transition:opacity 0.2s linear;transition:opacity 0.2s linear;}.css-v8jbtu > span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-v8jbtu svg{width:16px;margin-right:10px;}.css-v8jbtu:hover{opacity:0.6;}</style><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><style data-emotion-css="106jkm1">.css-106jkm1{position:absolute;top:0;right:-10%;margin:10px 10px 0 0;padding:3px 10px;border-radius:50px;min-width:45px;font-family:"Poppins",sans-serif;font-size:12px;opacity:1;color:#fff;text-align:center;background:rgba(248,179,25,1);}</style><span class="css-106jkm1">Shell</span></div><style data-emotion-css="1o93l7h">.css-1o93l7h{background:#FAFAFF !important;box-shadow:0 16px 12px -10px rgba(5,7,26,0.1);}</style><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span>rails new MySpinaApp</span></span></code></pre></div><p>Then add these lines to your <style data-emotion-css="o9sqdn">.css-o9sqdn{padding:3px 8px;background-color:rgba(25,23,22,0.05);color:rgba(155,93,229,0.8);border-radius:6px;cursor:pointer;}</style><code class="css-o9sqdn">Gemfile</code></p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><style data-emotion-css="p8oanf">.css-p8oanf{position:absolute;top:0;right:-10%;margin:10px 10px 0 0;padding:3px 10px;border-radius:50px;min-width:45px;font-family:"Poppins",sans-serif;font-size:12px;opacity:1;color:#fff;text-align:center;background:rgba(255,49,91,1);}</style><span class="css-p8oanf">Ruby</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span>gem </span><span style="color:#df5000">&#x27;spina-template&#x27;</span><span>
</span></span><span><span>gem </span><span style="color:#df5000">&#x27;spina&#x27;</span></span></code></pre></div><p>Don&#x27;t forget to <code class="css-o9sqdn">bundle install</code> !</p><p>And finally run the installation with the following command in your terminal and answer to the different questions that the command line asks you.</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-106jkm1">Shell</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span>rails g spina:install</span></span></code></pre></div><p>Now if you run <code class="css-o9sqdn">rails s</code> and open up <code class="css-o9sqdn">localhost:3000</code> you should have your CMS running. If you want to go to the admin panel, just go to <code class="css-o9sqdn">localhost:3000/admin</code> and use the login you gave in the command line to log in !</p><h2>Creating a Spina Theme</h2><p>After installing Spina, and if you chose to use the Demo theme, you will have two files in <code class="css-o9sqdn">config/initializers/themes</code>, a <code class="css-o9sqdn">default.rb</code> and a <code class="css-o9sqdn">demo.rb</code>. I recommend deleting these later, since it might through you an error since your pages are using one of these at the moment.</p><p>This is how our New page panel will look like for our Post page creation.</p><p><style data-emotion-css="1l8om8e">.css-1l8om8e{max-width:120%;margin:40px -10% 20px;display:block;position:relative;border-radius:4px;}.css-1l8om8e img{opacity:0;display:block;width:100%;position:relative;z-index:2;}.css-1l8om8e::before,.css-1l8om8e::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-image:inherit;background-size:cover;background-position:center center;}.css-1l8om8e::before{top:10px;-webkit-filter:blur(25px);filter:blur(25px);-webkit-backface-visibility:visible;backface-visibility:visible;-webkit-transform:scale(1.03) translate3d(0,0,0);-ms-transform:scale(1.03) translate3d(0,0,0);transform:scale(1.03) translate3d(0,0,0);z-index:0;opacity:0.35;-webkit-transition:opacity 0.2 linear;transition:opacity 0.2 linear;}.css-1l8om8e::after{z-index:1;border-radius:4px;}</style><span style="background-image:url(../static/spina-admin.min.png);transition:0.5s filter linear;filter:blur(25px)" class="css-1l8om8e"><img alt="Spina Admin Panel" src="../static/spina-admin.min.png"/></span><style data-emotion-css="15f1pbb">.css-15f1pbb{display:block;text-align:center;margin:0 0 40px;font-size:12px;opacity:0.5;font-family:"Poppins",sans-serif;}</style><span class="css-15f1pbb">Spina Admin Panel</span></p><p>You can go and create a new file in this folder with your own theme name, I&#x27;ll be calling it <code class="css-o9sqdn">labs.rb</code>.</p><p>Then add the following by changing &quot;Labs&quot; by your theme name !</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Ruby</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span class="hljs-class" style="color:#a71d5d">module</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#795da3">Spina</span><span>
</span></span><span><span>  </span><span class="hljs-class" style="color:#a71d5d">module</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#795da3">LabsTheme</span><span>
</span></span><span><span>    </span><span style="color:#a71d5d">include</span><span> </span><span style="color:#0086b3">:</span><span style="color:#0086b3">:ActiveSupport</span><span style="color:#0086b3">:</span><span style="color:#0086b3">:Configurable</span><span>
</span></span><span>
</span><span><span>    config_accessor </span><span style="color:#0086b3">:title</span><span>, </span><span style="color:#0086b3">:page_parts</span><span>, </span><span style="color:#0086b3">:view_templates</span><span>, </span><span style="color:#0086b3">:layout_parts</span><span>, </span><span style="color:#0086b3">:custom_pages</span><span>, </span><span style="color:#0086b3">:plugins</span><span>, </span><span style="color:#0086b3">:structures</span><span>
</span></span><span>
</span><span><span>    </span><span style="color:#a71d5d">self</span><span>.title = </span><span style="color:#df5000">&#x27;Labs&#x27;</span><span>
</span></span><span>
</span><span><span>  </span><span style="color:#a71d5d">end</span><span>
</span></span><span><span></span><span style="color:#a71d5d">end</span><span>
</span></span><span>
</span><span>theme = Spina::Theme.new
</span><span><span>theme.name = </span><span style="color:#df5000">&#x27;Labs&#x27;</span><span>
</span></span><span>theme.config = Spina::LabsTheme.config
</span><span>Spina.register_theme(theme)
</span></code></pre></div><p>Ok so we now have our theme configured. However we need to add page_parts, templates and a custom page.
The following code snippets will go right after <code class="css-o9sqdn">self.title = &#x27;Labs&#x27;</code>.</p><p>Let&#x27;s add some page_parts. If you look at the demo theme you can see 8 page_parts that are all the available page_parts on Spina (Line, Text, Photo, Photo collection, Attachment, Attachment collection, Structure and Color). In our case we are building a simple blog, therefore we only need 3 parts: an <strong>excerpt</strong> (Text), a <strong>content</strong> (Text) and a <strong>thumbnail</strong> (Photo).</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Ruby</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span style="color:#a71d5d">self</span><span>.page_parts = [
</span></span><span><span>  </span><span style="color:#969896"># Labs Page parts</span><span>
</span></span><span><span>  { </span><span style="color:#0086b3">name:</span><span> </span><span style="color:#df5000">&#x27;excerpt&#x27;</span><span>, </span><span style="color:#0086b3">title:</span><span> </span><span style="color:#df5000">&#x27;Excerpt&#x27;</span><span>, </span><span style="color:#0086b3">page_partable_type:</span><span> </span><span style="color:#df5000">&#x27;Spina::Text&#x27;</span><span> },
</span></span><span><span>  { </span><span style="color:#0086b3">name:</span><span> </span><span style="color:#df5000">&#x27;content&#x27;</span><span>, </span><span style="color:#0086b3">title:</span><span> </span><span style="color:#df5000">&#x27;Content&#x27;</span><span>, </span><span style="color:#0086b3">page_partable_type:</span><span> </span><span style="color:#df5000">&#x27;Spina::Text&#x27;</span><span> },
</span></span><span><span>  { </span><span style="color:#0086b3">name:</span><span> </span><span style="color:#df5000">&#x27;thumbnail&#x27;</span><span>, </span><span style="color:#0086b3">title:</span><span> </span><span style="color:#df5000">&#x27;Thumbnail&#x27;</span><span>, </span><span style="color:#0086b3">page_partable_type:</span><span> </span><span style="color:#df5000">&#x27;Spina::Photo&#x27;</span><span> }
</span></span><span>]
</span></code></pre></div><p>For our blog we will need 3 type of pages: a Homepage with the list of all our posts, a Post page and a Custom page for all the other static pages (i.e. an About page).</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Ruby</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span style="color:#a71d5d">self</span><span>.view_templates = {
</span></span><span><span>  </span><span style="color:#df5000">&#x27;homepage&#x27;</span><span> =&gt; { </span><span style="color:#0086b3">title:</span><span style="color:#df5000">&#x27;Homepage&#x27;</span><span>, </span><span style="color:#0086b3">page_parts:</span><span> </span><span style="color:#df5000">%w(excerpt content)</span><span> },
</span></span><span><span>  </span><span style="color:#df5000">&#x27;show&#x27;</span><span> =&gt; {
</span></span><span><span>    </span><span style="color:#0086b3">title:</span><span> </span><span style="color:#df5000">&#x27;Default Post&#x27;</span><span>, </span><span style="color:#0086b3">description:</span><span> </span><span style="color:#df5000">&#x27;A default post page&#x27;</span><span>, </span><span style="color:#0086b3">usage:</span><span> </span><span style="color:#df5000">&#x27;Can be used for a blog post&#x27;</span><span>,
</span></span><span><span>    </span><span style="color:#0086b3">page_parts:</span><span> </span><span style="color:#df5000">%w(excerpt content thumbnail)</span><span>
</span></span><span>  },
</span><span><span>  </span><span style="color:#df5000">&#x27;page&#x27;</span><span> =&gt; { </span><span style="color:#0086b3">title:</span><span style="color:#df5000">&#x27;Custom Page&#x27;</span><span>, </span><span style="color:#0086b3">page_parts:</span><span> </span><span style="color:#df5000">%w(content)</span><span> }
</span></span><span>}
</span></code></pre></div><span><center><small><em>Writting `%w(excerpt thumbnail content)` is the same as writting `["excerpt", "thumbnail", "content"]`. It's just a shortcut.</em></small></center></span><p>And finally we will add a custom_pages, that will be our Homepage. It seems to be a bug with Spina, but every time you update your Preferences, it regenerates all the defined custom_pages if they don&#x27;t exist. And unfortunately I didn&#x27;t manage to not to define any custom_pages. That&#x27;s why we will only define the Homepage which will always be existent on our website.</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Ruby</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span style="color:#a71d5d">self</span><span>.custom_pages = [
</span></span><span><span>  { </span><span style="color:#0086b3">name:</span><span> </span><span style="color:#df5000">&#x27;homepage&#x27;</span><span>, </span><span style="color:#0086b3">title:</span><span> </span><span style="color:#df5000">&#x27;Home&#x27;</span><span>, </span><span style="color:#0086b3">deletable:</span><span> </span><span style="color:#0086b3">true</span><span>, </span><span style="color:#0086b3">view_template:</span><span> </span><span style="color:#df5000">&#x27;homepage&#x27;</span><span> }
</span></span><span>]
</span></code></pre></div><p>I&#x27;d rather set <code class="css-o9sqdn">deletable: true</code>, in case there is a bug and we get two or more homepages...</p><h2>Creating the Spina Views</h2><p>We are going to create a blog similar to the one that I currently have. It&#x27;s done with the <a href="https://github.com/alexcarpenter/butane-jekyll-theme">Butane theme for Jekyll</a> created by <a href="http://alexcarpenter.me/">Alex Carpenter</a> with some adjustments that I have done (adding excerpts and covers).</p><p>This is what you should get at the end.</p><p><span style="background-image:url(../static/tutorial-blog.min.png);transition:0.5s filter linear;filter:blur(25px)" class="css-1l8om8e"><img alt="Butane Spina Theme" src="../static/tutorial-blog.min.png"/></span><span class="css-15f1pbb">Butane Spina Theme</span></p><p>To achieve this you will need to create the following files:</p><ul><li>app/views/layouts/lemonsky/application.html.haml</li><li>app/views/labs<ul><li>/pages/homepage.html.haml</li><li>/pages/show.html.haml</li><li>/pages/custom.html.haml</li><li>/shared/_footer.html.haml</li><li>/shared/_navigation.html.haml</li></ul></li></ul><p>Now that the views exist, you can actually go and create your pages in your Admin Panel and get your app to work. However your pages won&#x27;t show anything. Here I am just going to show you specific examples to show you how things work on Spina, for the rest I will invite you to download the sources attached to this article.</p><h3>Listing the articles with ancestry</h3><p>Everything you need to display is contained in the <code class="css-o9sqdn">@page</code> variable. Also Spina is based on ancestry to handle your pages tree. You can use it like this:</p><p><em>homepage.html.haml</em></p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Haml</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span style="color:#333333">%</span><span style="color:#a71d5d">section</span><span style="color:#795da3">.c-archives</span><span>
</span></span><span><span></span><span style="color:#333333">  %</span><span style="color:#a71d5d">ul</span><span style="color:#795da3">.c-archives__list</span><span>
</span></span><span><span>    -</span><span class="ruby"> @page.children.each </span><span class="ruby" style="color:#a71d5d">do</span><span class="ruby"> </span><span class="ruby hljs-params">|child|</span><span class="ruby">
</span></span><span><span class="ruby"></span><span>      -</span><span class="ruby"> </span><span class="ruby" style="color:#a71d5d">if</span><span class="ruby"> child == @page.children.first
</span></span><span><span class="ruby"></span><span>        -</span><span class="ruby"> this_year = child.created_at.strftime(</span><span class="ruby" style="color:#df5000">&quot;%Y&quot;</span><span class="ruby">)
</span></span><span><span class="ruby"></span><span style="color:#333333">        %</span><span style="color:#a71d5d">h2</span><span style="color:#795da3">.c-archives__year</span><span>= this_year
</span></span><span><span>      -</span><span class="ruby"> </span><span class="ruby" style="color:#a71d5d">else</span><span class="ruby">
</span></span><span><span class="ruby"></span><span>        -</span><span class="ruby"> next_year = child.created_at.strftime(</span><span class="ruby" style="color:#df5000">&quot;%Y&quot;</span><span class="ruby">)
</span></span><span><span class="ruby"></span><span>        -</span><span class="ruby"> </span><span class="ruby" style="color:#a71d5d">if</span><span class="ruby"> this_year != next_year
</span></span><span><span class="ruby"></span><span style="color:#333333">          %</span><span style="color:#a71d5d">h2</span><span style="color:#795da3">.c-archives__year</span><span>= next_year
</span></span><span><span></span><span style="color:#333333">      %</span><span style="color:#a71d5d">li</span><span style="color:#795da3">.c-archives__item</span><span>
</span></span><span><span></span><span style="color:#333333">        %</span><span style="color:#a71d5d">h3</span><span>= link_to child.title, child.materialized_path
</span></span><span><span></span><span style="color:#333333">        %</span><span style="color:#a71d5d">p</span><span>= child.created_at.strftime(&quot;%b %-d, %Y&quot;)
</span></span><span>        .n-post-excerpt= child.content(:excerpt).try(:html_safe)
</span></code></pre></div><p><a href="https://github.com/stefankroes/ancestry#navigating-your-tree">Here is the list of all the methods you can use to navigate your tree.</a></p><p>To get the full code for this theme you can go and <a href="https://github.com/nicolasthy/Spina-Butane-Theme">download the sources here</a>!</p><h3>Bonus: Creating a breadcrumb</h3><p>Here is another example of how you can manipulate your tree using ancestry in Spina</p><div class="css-cssveg"><div><span class="css-v8jbtu"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy to clipboard</span></span><span class="css-p8oanf">Haml</span></div><pre class="css-1o93l7h" style="display:block;background:white;padding:50px 0 15px;color:#333333;overflow-x:auto;font-size:16px;line-height:1;font-family:Menlo;margin:25px 0 25px -10%;border-radius:4px;width:120%"><code><span><span style="color:#333333">%</span><span style="color:#a71d5d">ol</span><span style="color:#795da3">.breadcrumb</span><span>
</span></span><span><span></span><span style="color:#333333">  %</span><span style="color:#a71d5d">li</span><span>
</span></span><span><span>    =</span><span class="ruby"> link_to </span><span class="ruby" style="color:#df5000">&quot;Home&quot;</span><span class="ruby">, root_url
</span></span><span><span class="ruby"></span><span>  -</span><span class="ruby"> @page.ancestors.each </span><span class="ruby" style="color:#a71d5d">do</span><span class="ruby"> </span><span class="ruby hljs-params">|ancestor|</span><span class="ruby">
</span></span><span><span class="ruby"></span><span style="color:#333333">    %</span><span style="color:#a71d5d">li</span><span>
</span></span><span><span>      =</span><span class="ruby"> link_to ancestor.menu_title, ancestor.materialized_path
</span></span><span><span class="ruby"></span><span style="color:#333333">  %</span><span style="color:#a71d5d">li</span><span style="color:#795da3">.active</span><span>
</span></span><span><span></span><span style="color:#333333">    %</span><span style="color:#a71d5d">a</span><span> = @page.menu_title</span></span></code></pre></div><p><code class="css-o9sqdn">menu_title</code> is your Navigation Title in your Advanced tab and the <code class="css-o9sqdn">materialized_path</code> is in the Search Engine tab when creating / updating a page. The name of these variables can be found when looking into the <a href="https://github.com/denkGroot/Spina/blob/master/app/views/spina/admin/pages/_form_advanced.html.haml">source code of Spina</a>.</p></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\n\u003cdiv class=\"alert alert-warning\"\u003e\nSpina has been updated a lot since I've written these articles. Commands may have changed since and I will do my best to write new articles on Spina soon !\n\u003c/div\u003e\n\nHi, lately I have been working on a different project that no longer requires React — neither Javascript actually. It's a CMS built on Ruby on Rails, a kind of equivalent to Wordpress, called [Spina](http://www.spinacms.com/). It's new, it's open-source, it's ruby on rails and it's awesome !\n\nThe down-side of this project is that they don't really have any documentation yet. That's why I've decided to start writing about it and even contributed to their Wiki. As I am a front-end developer, I won't be able to talk about all the back-end ruby part. It's going to be mainly some front-end tips and instructions to get started with Spina. You won't find a lot of articles or tutorials about this, but the developers at Spina are very reactive and even opened a Slack channel to communicate with it's users !\n\nSo let's get started !\n\n## Installing Spina\n\nInstalling Spina is really easy, you only need 3 simple lines given in their [Github repo](https://github.com/denkGroot/Spina).\nAs it's a Ruby on Rails CMS, you obviously need to have a Rails app first.\n\nIf you do have Ruby on Rails working, simply create a new project.\n\n```Shell\nrails new MySpinaApp\n```\n\nThen add these lines to your `Gemfile`\n\n```Ruby\ngem 'spina-template'\ngem 'spina'\n```\n\nDon't forget to `bundle install` !\n\nAnd finally run the installation with the following command in your terminal and answer to the different questions that the command line asks you.\n\n```Shell\nrails g spina:install\n```\n\nNow if you run `rails s` and open up `localhost:3000` you should have your CMS running. If you want to go to the admin panel, just go to `localhost:3000/admin` and use the login you gave in the command line to log in !\n\n## Creating a Spina Theme\n\nAfter installing Spina, and if you chose to use the Demo theme, you will have two files in `config/initializers/themes`, a `default.rb` and a `demo.rb`. I recommend deleting these later, since it might through you an error since your pages are using one of these at the moment.\n\nThis is how our New page panel will look like for our Post page creation.\n\n![Spina Admin Panel](../static/spina-admin.png \"Spina Admin Panel\")\n\nYou can go and create a new file in this folder with your own theme name, I'll be calling it `labs.rb`.\n\nThen add the following by changing \"Labs\" by your theme name !\n\n```Ruby\nmodule Spina\n  module LabsTheme\n    include ::ActiveSupport::Configurable\n\n    config_accessor :title, :page_parts, :view_templates, :layout_parts, :custom_pages, :plugins, :structures\n\n    self.title = 'Labs'\n\n  end\nend\n\ntheme = Spina::Theme.new\ntheme.name = 'Labs'\ntheme.config = Spina::LabsTheme.config\nSpina.register_theme(theme)\n```\n\nOk so we now have our theme configured. However we need to add page_parts, templates and a custom page.\nThe following code snippets will go right after `self.title = 'Labs'`.\n\nLet's add some page_parts. If you look at the demo theme you can see 8 page_parts that are all the available page_parts on Spina (Line, Text, Photo, Photo collection, Attachment, Attachment collection, Structure and Color). In our case we are building a simple blog, therefore we only need 3 parts: an **excerpt** (Text), a **content** (Text) and a **thumbnail** (Photo).\n\n```Ruby\nself.page_parts = [\n  # Labs Page parts\n  { name: 'excerpt', title: 'Excerpt', page_partable_type: 'Spina::Text' },\n  { name: 'content', title: 'Content', page_partable_type: 'Spina::Text' },\n  { name: 'thumbnail', title: 'Thumbnail', page_partable_type: 'Spina::Photo' }\n]\n```\n\nFor our blog we will need 3 type of pages: a Homepage with the list of all our posts, a Post page and a Custom page for all the other static pages (i.e. an About page).\n\n```Ruby\nself.view_templates = {\n  'homepage' =\u003e { title:'Homepage', page_parts: %w(excerpt content) },\n  'show' =\u003e {\n    title: 'Default Post', description: 'A default post page', usage: 'Can be used for a blog post',\n    page_parts: %w(excerpt content thumbnail)\n  },\n  'page' =\u003e { title:'Custom Page', page_parts: %w(content) }\n}\n```\n\u003ccenter\u003e\u003csmall\u003e\u003cem\u003eWritting `%w(excerpt thumbnail content)` is the same as writting `[\"excerpt\", \"thumbnail\", \"content\"]`. It's just a shortcut.\u003c/em\u003e\u003c/small\u003e\u003c/center\u003e\n\nAnd finally we will add a custom_pages, that will be our Homepage. It seems to be a bug with Spina, but every time you update your Preferences, it regenerates all the defined custom_pages if they don't exist. And unfortunately I didn't manage to not to define any custom_pages. That's why we will only define the Homepage which will always be existent on our website.\n\n```Ruby\nself.custom_pages = [\n  { name: 'homepage', title: 'Home', deletable: true, view_template: 'homepage' }\n]\n```\n\nI'd rather set `deletable: true`, in case there is a bug and we get two or more homepages...\n\n## Creating the Spina Views\n\nWe are going to create a blog similar to the one that I currently have. It's done with the [Butane theme for Jekyll](https://github.com/alexcarpenter/butane-jekyll-theme) created by [Alex Carpenter](http://alexcarpenter.me/) with some adjustments that I have done (adding excerpts and covers).\n\nThis is what you should get at the end.\n\n![Butane Spina Theme](../static/tutorial-blog.png \"Butane Spina Theme\")\n\nTo achieve this you will need to create the following files:\n\n* app/views/layouts/lemonsky/application.html.haml\n* app/views/labs\n  * /pages/homepage.html.haml\n  * /pages/show.html.haml\n  * /pages/custom.html.haml\n  * /shared/_footer.html.haml\n  * /shared/_navigation.html.haml\n\nNow that the views exist, you can actually go and create your pages in your Admin Panel and get your app to work. However your pages won't show anything. Here I am just going to show you specific examples to show you how things work on Spina, for the rest I will invite you to download the sources attached to this article.\n\n### Listing the articles with ancestry\n\nEverything you need to display is contained in the `@page` variable. Also Spina is based on ancestry to handle your pages tree. You can use it like this:\n\n_homepage.html.haml_\n```Haml\n%section.c-archives\n  %ul.c-archives__list\n    - @page.children.each do |child|\n      - if child == @page.children.first\n        - this_year = child.created_at.strftime(\"%Y\")\n        %h2.c-archives__year= this_year\n      - else\n        - next_year = child.created_at.strftime(\"%Y\")\n        - if this_year != next_year\n          %h2.c-archives__year= next_year\n      %li.c-archives__item\n        %h3= link_to child.title, child.materialized_path\n        %p= child.created_at.strftime(\"%b %-d, %Y\")\n        .n-post-excerpt= child.content(:excerpt).try(:html_safe)\n```\n\n[Here is the list of all the methods you can use to navigate your tree.](https://github.com/stefankroes/ancestry#navigating-your-tree)\n\nTo get the full code for this theme you can go and [download the sources here](https://github.com/nicolasthy/Spina-Butane-Theme)!\n\n### Bonus: Creating a breadcrumb\n\nHere is another example of how you can manipulate your tree using ancestry in Spina\n```Haml\n%ol.breadcrumb\n  %li\n    = link_to \"Home\", root_url\n  - @page.ancestors.each do |ancestor|\n    %li\n      = link_to ancestor.menu_title, ancestor.materialized_path\n  %li.active\n    %a = @page.menu_title\n```\n\n`menu_title` is your Navigation Title in your Advanced tab and the `materialized_path` is in the Search Engine tab when creating / updating a page. The name of these variables can be found when looking into the [source code of Spina](https://github.com/denkGroot/Spina/blob/master/app/views/spina/admin/pages/_form_advanced.html.haml).\n","data":{"title":"Spina: A Ruby on Rails CMS","author":"Nicolas Thiry","tags":["ruby"],"excerpt":"Introduction to a new CMS built on Ruby on Rails. This is a step by step guide to get started with it.","published":true},"isEmpty":false,"excerpt":"Introduction to a new CMS built on Ruby on Rails. This is a step by step guide to get started with it."}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2016-03-11-spina-rails-cms"},"buildId":"c2gPfX42HipDbcEI7eATE","assetPrefix":"/nicolasthy.next.js","runtimeConfig":{"linkPrefix":"/nicolasthy.next.js"},"nextExport":false,"isFallback":false,"gsp":true,"appGip":true}</script><script nomodule="" src="/nicolasthy.next.js/_next/static/runtime/polyfills-1c161e633660818aa2c3.js"></script><script async="" data-next-page="/_app" src="/nicolasthy.next.js/_next/static/c2gPfX42HipDbcEI7eATE/pages/_app.js"></script><script async="" data-next-page="/posts/[slug]" src="/nicolasthy.next.js/_next/static/c2gPfX42HipDbcEI7eATE/pages/posts/%5Bslug%5D.js"></script><script src="/nicolasthy.next.js/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/nicolasthy.next.js/_next/static/chunks/framework.4dd1003cc9c949c7fcd3.js" async=""></script><script src="/nicolasthy.next.js/_next/static/chunks/5d581ca7a6b7feed04ab21d48a887f6897e243dd.9448a719dfcc1617186b.js" async=""></script><script src="/nicolasthy.next.js/_next/static/chunks/498e1ba5385146d16e862764b4705d04b633e4b8.d26e3f5073f8d2ec78c3.js" async=""></script><script src="/nicolasthy.next.js/_next/static/runtime/main-7e6ae5fe2e85357fb1d2.js" async=""></script><script src="/nicolasthy.next.js/_next/static/c2gPfX42HipDbcEI7eATE/_buildManifest.js" async=""></script><script src="/nicolasthy.next.js/_next/static/c2gPfX42HipDbcEI7eATE/_ssgManifest.js" async=""></script></body></html>